<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ Rifas Annie</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --gold: #D4AF37;
            --gold-light: #F4E4BC;
            --dark: #0a0a0a;
            --dark-card: #141414;
            --green: #00C853;
            --green-glow: rgba(0, 200, 83, 0.4);
            --red: #FF1744;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--dark);
            min-height: 100vh;
            color: white;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .brand {
            text-align: center;
            padding: 25px 0;
        }
        .brand-name {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 50%, var(--gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 6px;
        }
        .brand-tagline {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.5);
            letter-spacing: 3px;
        }

        /* Tabs */
        .tabs-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
        }
        .tab-btn {
            padding: 15px 40px;
            border: 2px solid var(--gold);
            background: transparent;
            color: var(--gold);
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tab-btn:hover {
            background: rgba(212, 175, 55, 0.1);
        }
        .tab-btn.active {
            background: var(--gold);
            color: var(--dark);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }

        /* Rifa Card */
        .rifa-card {
            background: var(--dark-card);
            border-radius: 25px;
            padding: 30px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        .rifa-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .rifa-badge {
            display: inline-block;
            background: linear-gradient(135deg, #c41e3a, #ff6b6b);
            padding: 6px 20px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 2px;
            margin-bottom: 12px;
        }
        .rifa-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 8px;
        }
        .rifa-title span { color: var(--gold); }
        .rifa-prize {
            font-size: 1rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 15px;
        }
        .rifa-prize strong { color: #4FC3F7; }
        .rifa-price {
            display: inline-block;
            background: linear-gradient(135deg, var(--gold), #FFD700);
            color: var(--dark);
            font-size: 1.8rem;
            font-weight: 700;
            padding: 10px 30px;
            border-radius: 12px;
        }

        /* Info Pills */
        .info-pills {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .pill {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 0.8rem;
        }
        .pill strong { color: var(--gold); }

        /* Stats */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 20px;
            padding: 12px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
        }
        .stat-item { text-align: center; }
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
        }
        .stat-value.available { color: var(--green); }
        .stat-value.sold { color: var(--red); }
        .stat-label {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.5);
            text-transform: uppercase;
        }

        /* Board */
        .board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 6px;
            margin-bottom: 15px;
        }
        .ticket {
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .ticket.available {
            background: linear-gradient(145deg, #1a3d1a, #0d260d);
            color: var(--green);
            border: 1px solid rgba(0, 200, 83, 0.3);
        }
        .ticket.available:hover {
            transform: scale(1.15);
            border-color: var(--green);
            box-shadow: 0 0 20px var(--green-glow);
            z-index: 10;
        }
        .ticket.sold {
            background: rgba(255, 23, 68, 0.1);
            color: rgba(255,255,255,0.2);
            cursor: not-allowed;
        }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.6);
        }
        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 4px;
        }
        .legend-dot.available { background: var(--green); }
        .legend-dot.sold { background: rgba(255, 23, 68, 0.4); }

        /* Footer */
        .footer-info {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.02);
            border-radius: 12px;
            margin-top: 20px;
        }
        .footer-responsible { color: rgba(255,255,255,0.7); }
        .footer-responsible strong { color: var(--gold); }
        .footer-phone {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 5px 0;
        }
        .footer-note {
            font-size: 0.8rem;
            color: rgba(255,255,255,0.4);
            font-style: italic;
        }
        .whatsapp-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(37, 211, 102, 0.3);
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal-overlay.active { display: flex; }
        .modal {
            background: var(--dark-card);
            border-radius: 20px;
            padding: 35px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            border: 2px solid var(--gold);
        }
        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 10px;
        }
        .modal-number {
            font-size: 4rem;
            font-weight: 700;
            color: var(--green);
            margin: 15px 0;
        }
        .modal-rifa {
            font-size: 1rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 20px;
        }
        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        .modal-btn {
            padding: 12px 25px;
            border-radius: 50px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
        }
        .modal-btn.primary {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }
        .modal-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        @media (max-width: 600px) {
            .brand-name { font-size: 1.8rem; }
            .tab-btn { padding: 12px 25px; font-size: 0.9rem; }
            .board {
                grid-template-columns: repeat(5, 1fr);
                gap: 5px;
            }
            .ticket { font-size: 0.8rem; }
            .rifa-title { font-size: 1.5rem; }
            .rifa-price { font-size: 1.4rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="brand">
            <h1 class="brand-name">RIFAS ANNIE</h1>
            <p class="brand-tagline">RIFAS NAVIDE√ëAS 2024</p>
        </header>

        <!-- Tabs -->
        <div class="tabs-container">
            <button class="tab-btn active" onclick="switchTab('aire')">‚ùÑÔ∏è Aire Acondicionado</button>
            <button class="tab-btn" onclick="switchTab('tv')">üì∫ TV 43"</button>
        </div>

        <!-- RIFA AIRE -->
        <div id="tab-aire" class="tab-content active">
            <div class="rifa-card">
                <div class="rifa-header">
                    <div class="rifa-badge">üéÑ RIFA NAVIDE√ëA üéÑ</div>
                    <h2 class="rifa-title">¬°Ll√©vate un <span>Aire Acondicionado</span>!</h2>
                    <p class="rifa-prize">Split <strong>12,000 BTU</strong> ‚Ä¢ ¬°No te lo pierdas!</p>
                    <div class="rifa-price">1.500 Bol√≠vares</div>
                </div>
                <div class="info-pills">
                    <div class="pill">üé∞ <strong>Loter√≠a del T√°chira</strong></div>
                    <div class="pill">üéØ Terminal A ‚Ä¢ <strong>10:10pm</strong></div>
                    <div class="pill">üí≥ Pago al <strong>reservar</strong></div>
                </div>
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-value available" id="available-aire">--</div>
                        <div class="stat-label">Disponibles</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value sold" id="sold-aire">--</div>
                        <div class="stat-label">Vendidos</div>
                    </div>
                </div>
                <div class="board" id="board-aire"></div>
                <div class="legend">
                    <div class="legend-item"><div class="legend-dot available"></div><span>Disponible</span></div>
                    <div class="legend-item"><div class="legend-dot sold"></div><span>Vendido</span></div>
                </div>
                <div class="footer-info">
                    <p class="footer-responsible">Responsable: <strong>Ana Varela</strong></p>
                    <p class="footer-phone">üìû 0424-7470612</p>
                    <a href="https://wa.me/584247470612" target="_blank" class="whatsapp-btn">üí¨ Contactar por WhatsApp</a>
                    <p class="footer-note">Fecha del sorteo: al vender todos los n√∫meros</p>
                </div>
            </div>
        </div>

        <!-- RIFA TV -->
        <div id="tab-tv" class="tab-content">
            <div class="rifa-card">
                <div class="rifa-header">
                    <div class="rifa-badge">‚ö° RIFA FLASH ‚ö°</div>
                    <h2 class="rifa-title">¬°Ll√©vate un <span>TV de 43"</span>!</h2>
                    <p class="rifa-prize">Android TV ‚Ä¢ Google TV ‚Ä¢ <strong>4K HDR</strong></p>
                    <div class="rifa-price">1.400 Bol√≠vares</div>
                </div>
                <div class="info-pills">
                    <div class="pill">üé∞ <strong>Loter√≠a del T√°chira</strong></div>
                    <div class="pill">üéØ Terminal A ‚Ä¢ <strong>10:10pm</strong></div>
                    <div class="pill">üí≥ Pago al <strong>reservar</strong></div>
                </div>
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-value available" id="available-tv">--</div>
                        <div class="stat-label">Disponibles</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value sold" id="sold-tv">--</div>
                        <div class="stat-label">Vendidos</div>
                    </div>
                </div>
                <div class="board" id="board-tv"></div>
                <div class="legend">
                    <div class="legend-item"><div class="legend-dot available"></div><span>Disponible</span></div>
                    <div class="legend-item"><div class="legend-dot sold"></div><span>Vendido</span></div>
                </div>
                <div class="footer-info">
                    <p class="footer-responsible">Responsable: <strong>Ana Varela</strong></p>
                    <p class="footer-phone">üìû 0424-7470612</p>
                    <a href="https://wa.me/584247470612" target="_blank" class="whatsapp-btn">üí¨ Contactar por WhatsApp</a>
                    <p class="footer-note">Fecha del sorteo: al vender todos los n√∫meros</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal">
            <h3 class="modal-title">üéüÔ∏è ¬°Excelente elecci√≥n!</h3>
            <div class="modal-number" id="modal-number">00</div>
            <p class="modal-rifa" id="modal-rifa">Rifa del Aire Acondicionado</p>
            <div class="modal-buttons">
                <button class="modal-btn primary" id="btn-confirm">‚úì Reservar por WhatsApp</button>
                <button class="modal-btn secondary" id="btn-cancel">Cancelar</button>
            </div>
        </div>
    </div>

    <script>
        const SUPABASE_URL = 'https://ebamqroznywevnabppms.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImViYW1xcm96bnl3ZXZuYWJwcG1zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NDM5ODAsImV4cCI6MjA4MDIxOTk4MH0.DlZ1PuGoaE9Tzgfz4q-2C5scPRvl2QvlrnTRc2zo9j8';
        const WHATSAPP = '584247470612';

        const rifasInfo = {
            aire: { nombre: 'Aire Acondicionado 12mil BTU', precio: '1.500 Bs' },
            tv: { nombre: 'TV 43" 4K Android TV', precio: '1.400 Bs' }
        };

        let selectedNumber = null;
        let selectedRifa = null;

        // Switch tabs
        function switchTab(rifa) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`tab-${rifa}`).classList.add('active');
        }

        // Load tickets
        async function loadTickets(rifa) {
            try {
                const response = await fetch(
                    `${SUPABASE_URL}/rest/v1/Tickets?Rifa=eq.${rifa}&order=numero`,
                    { headers: { 'apikey': SUPABASE_KEY, 'Authorization': `Bearer ${SUPABASE_KEY}` } }
                );
                const tickets = await response.json();
                renderBoard(rifa, tickets);
                updateStats(rifa, tickets);
            } catch (error) {
                console.error(`Error cargando ${rifa}:`, error);
            }
        }

        // Render board
        function renderBoard(rifa, tickets) {
            const board = document.getElementById(`board-${rifa}`);
            board.innerHTML = '';
            tickets.forEach(ticket => {
                const div = document.createElement('div');
                div.className = `ticket ${ticket.vendido ? 'sold' : 'available'}`;
                div.textContent = ticket.numero.toString().padStart(2, '0');
                if (!ticket.vendido) {
                    div.addEventListener('click', () => openModal(ticket.numero, rifa));
                }
                board.appendChild(div);
            });
        }

        // Update stats
        function updateStats(rifa, tickets) {
            const available = tickets.filter(t => !t.vendido).length;
            const sold = tickets.filter(t => t.vendido).length;
            document.getElementById(`available-${rifa}`).textContent = available;
            document.getElementById(`sold-${rifa}`).textContent = sold;
        }

        // Modal
        function openModal(numero, rifa) {
            selectedNumber = numero;
            selectedRifa = rifa;
            document.getElementById('modal-number').textContent = numero.toString().padStart(2, '0');
            document.getElementById('modal-rifa').textContent = `Rifa: ${rifasInfo[rifa].nombre}`;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function confirmReservation() {
            const info = rifasInfo[selectedRifa];
            const msg = `üéÑ ¬°Hola! Me interesa la rifa de Annie Shoes.\n\nüéüÔ∏è N√∫mero: *${selectedNumber.toString().padStart(2, '0')}*\nüéÅ Premio: ${info.nombre}\nüí∞ Precio: ${info.precio}\n\n¬°Gracias!`;
            window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`, '_blank');
            closeModal();
        }

        // Events
        document.getElementById('btn-cancel').addEventListener('click', closeModal);
        document.getElementById('btn-confirm').addEventListener('click', confirmReservation);
        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target.id === 'modal') closeModal();
        });

        // Init
        loadTickets('aire');
        loadTickets('tv');
        setInterval(() => { loadTickets('aire'); loadTickets('tv'); }, 30000);
    </script>
</body>
</html>
